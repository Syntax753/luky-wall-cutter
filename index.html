<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luke Wall Cutter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        overscroll-behavior: none;
        font-family: 'Inter', sans-serif;
      }
       @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
       .dimension-input {
            background-color: transparent;
            border: none;
            color: black;
            text-align: center;
            outline: none;
            width: 100%;
            height: 100%;
            font-size: 10px;
            -moz-appearance: textfield;
       }
        .dimension-input::-webkit-outer-spin-button,
        .dimension-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
  </head>
  <body class="bg-gray-900">
    <div id="root"></div>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
        }
      }
    </script>
    <script type="module">
      import React, { useState, useMemo, useEffect, useRef } from 'react';
      import ReactDOM from 'react-dom/client';

      // --- From types.ts ---
      const ShapeType = {
        CUBE: 'cube',
        L_SHAPE: 'l-shape',
        T_SHAPE: 't-shape',
        U_SHAPE: 'u-shape',
      };

      // --- From constants.ts ---
      const DEFAULT_DIMENSIONS = {
        [ShapeType.CUBE]: {
          width: 440,
          height: 215,
        },
        [ShapeType.L_SHAPE]: {
          overallHeight: 215,
          overallWidth: 440,
          verticalArmWidth: 40,
          horizontalArmWidth: 40,
        },
        [ShapeType.T_SHAPE]: {
          topWidth: 440,
          topHeight: 40,
          stemWidth: 40,
          stemHeight: 80,
        },
        [ShapeType.U_SHAPE]: {
            overallWidth: 440,
            overallHeight: 215,
            leftArmWidth: 30,
            rightArmWidth: 40,
            baseThickness: 100,
        }
      };

      // --- From components/icons.tsx ---
      const CubeIcon = () => (
        React.createElement('svg', { viewBox: "0 0 24 24", fill: "currentColor" },
          React.createElement('path', { d: "M4 4h16v16H4z" })
        )
      );

      const LShapeIcon = () => (
        React.createElement('svg', { viewBox: "0 0 24 24", fill: "currentColor" },
          React.createElement('path', { d: "M4 4h8v8h8v8H4z" })
        )
      );

      const TShapeIcon = () => (
        React.createElement('svg', { viewBox: "0 0 24 24", fill: "currentColor" },
          React.createElement('path', { d: "M4 4h16v8h-6v8h-4v-8H4z" })
        )
      );

      const UShapeIcon = () => (
        React.createElement('svg', { viewBox: "0 0 24 24", fill: "currentColor" },
            React.createElement('path', { d: "M4 4h4v12h8V4h4v16H4z" })
        )
      );
      
      const RotateLeftIcon = () => (
        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"},
            React.createElement('path', { d: "M2.5 2v6h6" }),
            React.createElement('path', { d: "M2.66 15.57a10 10 0 1 0 .57-8.38" })
        )
      );

      const RotateRightIcon = () => (
        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"},
            React.createElement('path', { d: "M21.5 2v6h-6" }),
            React.createElement('path', { d: "M21.34 15.57a10 10 0 1 1-.57-8.38" })
        )
      );
      
      // --- From components/shapes/SvgDimensionLabel.tsx (Helper used by shapes) ---
      const SvgDimensionLabel = ({ p1, p2, label, paramLabel, field, offset, rotation = 0, onDimensionChange }) => {
        const [isEditing, setIsEditing] = useState(false);
        const [currentValue, setCurrentValue] = useState(label.match(/\d+/)[0]);

        useEffect(() => {
            setCurrentValue(label.match(/\d+/)[0]);
        }, [label]);

        const textOffset = 10;
        const lineP1 = { x: p1[0] + offset.x, y: p1[1] + offset.y };
        const lineP2 = { x: p2[0] + offset.x, y: p2[1] + offset.y };

        const angle = Math.atan2(lineP2.y - lineP1.y, lineP2.x - lineP1.x);
        const textX = (lineP1.x + lineP2.x) / 2 - textOffset * Math.sin(angle);
        const textY = (lineP1.y + lineP2.y) / 2 + textOffset * Math.cos(angle);
        
        const fontSize = 10;
        const paddingX = 6;
        const paddingY = 3;
        
        const textWidth = Math.max(label.length, paramLabel.length) * (fontSize * 0.55);
        const rectWidth = textWidth + paddingX * 2;
        const rectHeight = (fontSize * 2.2) + paddingY * 2;
        const rectX = textX - rectWidth / 2;
        const rectY = textY - rectHeight / 2;

        const gTransform = `rotate(${-rotation} ${textX} ${textY})`;

        const handleUpdate = () => {
            onDimensionChange(field, currentValue);
            setIsEditing(false);
        };

        const handleKeyDown = (e) => {
            if (e.key === 'Enter') {
                handleUpdate();
            } else if (e.key === 'Escape') {
                setIsEditing(false);
                setCurrentValue(label.match(/\d+/)[0]);
            }
        };

        return React.createElement('g', { className: "text-sm font-sans" },
          React.createElement('g', { stroke: "white" },
            React.createElement('line', { x1: lineP1.x, y1: lineP1.y, x2: lineP2.x, y2: lineP2.y, strokeWidth: "1" }),
            React.createElement('line', { x1: p1[0], y1: p1[1], x2: lineP1.x, y2: lineP1.y, strokeWidth: "0.5", strokeDasharray: "2 2" }),
            React.createElement('line', { x1: p2[0], y1: p2[1], x2: lineP2.x, y2: lineP2.y, strokeWidth: "0.5", strokeDasharray: "2 2" })
          ),
          React.createElement('g', { transform: gTransform, style: { cursor: 'pointer' } },
             React.createElement('rect', {
                x: rectX,
                y: rectY,
                width: rectWidth,
                height: rectHeight,
                rx: 8,
                ry: 8,
                fill: '#60a5fa',
                onClick: () => setIsEditing(true)
             }),
             isEditing ? 
             React.createElement('foreignObject', { x: rectX, y: rectY, width: rectWidth, height: rectHeight },
                React.createElement('input', {
                    type: "number",
                    value: currentValue,
                    onChange: (e) => setCurrentValue(e.target.value),
                    onBlur: handleUpdate,
                    onKeyDown: handleKeyDown,
                    autoFocus: true,
                    onFocus: (e) => e.target.select(),
                    className: "dimension-input",
                    style: { color: 'black' }
                })
             ) :
             React.createElement('text', {
                x: textX,
                y: textY,
                dominantBaseline: "middle",
                textAnchor: "middle",
                fontSize: fontSize,
                fill: "black",
                stroke: "none",
                onClick: () => setIsEditing(true),
                style: { userSelect: 'none' }
             }, 
                React.createElement('tspan', { x: textX, dy: "-0.6em" }, paramLabel),
                React.createElement('tspan', { x: textX, dy: "1.2em" }, label)
            )
          )
        );
      };


      // --- From components/shapes/CubeShape.tsx ---
      const CubeShape = ({ dimensions, rotation, onDimensionChange, previewSize }) => {
        const { width, height } = dimensions;
        const w = Math.max(width || 1, 1);
        const h = Math.max(height || 1, 1);

        const isSideways = rotation % 180 !== 0;
        const shapeWidth = isSideways ? h : w;
        const shapeHeight = isSideways ? w : h;

        const padding = 160;
        const availableWidth = previewSize.width > padding ? previewSize.width - padding : 0;
        const availableHeight = previewSize.height > padding ? previewSize.height - padding : 0;
        
        const scale = Math.min(availableWidth / shapeWidth, availableHeight / shapeHeight);

        const sw = w * scale;
        const sh = h * scale;

        const points = {
          p0: [-sw / 2, sh / 2], p1: [sw / 2, sh / 2], p2: [sw / 2, -sh / 2], p3: [-sw / 2, -sh / 2],
        };

        const rotatedWidth = isSideways ? sh : sw;
        const rotatedHeight = isSideways ? sw : sh;
        const viewBoxSize = Math.max(rotatedWidth, rotatedHeight) + 160;

        const viewBox = `${-viewBoxSize/2} ${-viewBoxSize/2} ${viewBoxSize} ${viewBoxSize}`;

        return React.createElement('svg', { viewBox, className: "w-full h-full", style: { strokeLinejoin: 'round', strokeLinecap: 'round' } },
          React.createElement('g', { stroke: "#374151", strokeWidth: "1" },
            React.createElement('rect', { x: -sw/2, y: -sh/2, width: sw, height: sh, fill: "#d1d5db" })
          ),
          React.createElement(SvgDimensionLabel, { p1: points.p1, p2: points.p2, label: `${height} mm`, paramLabel: "Height (Y)", field: "height", offset: { x: 15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange }),
          React.createElement(SvgDimensionLabel, { p1: points.p0, p2: points.p1, label: `${width} mm`, paramLabel: "Width (X)", field: "width", offset: { x: 0, y: 15 }, rotation: rotation, onDimensionChange: onDimensionChange })
        );
      };

      // --- From components/shapes/LShape.tsx ---
      const LShape = ({ dimensions, rotation, onDimensionChange, previewSize }) => {
        const { overallHeight, overallWidth, verticalArmWidth, horizontalArmWidth } = dimensions;

        const oh = Math.max(overallHeight || 1, 1);
        const ow = Math.max(overallWidth || 1, 1);
        const vaw = Math.max(verticalArmWidth || 1, 1);
        const haw = Math.max(horizontalArmWidth || 1, 1);

        const isSideways = rotation % 180 !== 0;
        const shapeWidth = isSideways ? oh : ow;
        const shapeHeight = isSideways ? ow : oh;

        const padding = 160;
        const availableWidth = previewSize.width > padding ? previewSize.width - padding : 0;
        const availableHeight = previewSize.height > padding ? previewSize.height - padding : 0;

        const scale = Math.min(availableWidth / shapeWidth, availableHeight / shapeHeight);

        const soh = oh * scale;
        const sow = ow * scale;
        const svaw = vaw * scale;
        const shaw = haw * scale;

        const offsetX = -sow / 2;
        const offsetY = -soh / 2;

        const frontPoints = {
            p0: [0 + offsetX, 0 + offsetY], 
            p1: [svaw + offsetX, 0 + offsetY], 
            p2: [svaw + offsetX, soh - shaw + offsetY],
            p3: [sow + offsetX, soh - shaw + offsetY], 
            p4: [sow + offsetX, soh + offsetY], 
            p5: [0 + offsetX, soh + offsetY],
        };
        
        const rotatedWidth = isSideways ? soh : sow;
        const rotatedHeight = isSideways ? sow : soh;
        const viewBoxSize = Math.max(rotatedWidth, rotatedHeight) + 160;
        const viewBox = `${-viewBoxSize / 2} ${-viewBoxSize / 2} ${viewBoxSize} ${viewBoxSize}`;

        return React.createElement('svg', { viewBox, className: "w-full h-full", style: { strokeLinejoin: 'round', strokeLinecap: 'round' } },
            React.createElement('g', { stroke: "#374151", strokeWidth: "1" },
                React.createElement('polygon', { points: Object.values(frontPoints).map(p => p.join(',')).join(' '), fill: "#d1d5db" })
            ),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p5, p2: frontPoints.p0, label: `${overallHeight} mm`, paramLabel: "Overall Height", field: "overallHeight", offset: { x: -15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p4, p2: frontPoints.p5, label: `${overallWidth} mm`, paramLabel: "Overall Width", field: "overallWidth", offset: { x: 0, y: 15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p0, p2: frontPoints.p1, label: `${verticalArmWidth} mm`, paramLabel: "Vertical Arm Width", field: "verticalArmWidth", offset: { x: 0, y: -15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p3, p2: frontPoints.p4, label: `${horizontalArmWidth} mm`, paramLabel: "Horizontal Arm Width", field: "horizontalArmWidth", offset: { x: 15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange })
        );
      };

      // --- From components/shapes/TShape.tsx ---
      const TShape = ({ dimensions, rotation, onDimensionChange, previewSize }) => {
        const { topWidth, topHeight, stemWidth, stemHeight } = dimensions;
        const tw = Math.max(topWidth || 1, 1);
        const th = Math.max(topHeight || 1, 1);
        const sw = Math.max(stemWidth || 1, 1);
        const sh = Math.max(stemHeight || 1, 1);
        
        const totalHeight = th + sh;
        
        const isSideways = rotation % 180 !== 0;
        const shapeWidth = isSideways ? totalHeight : tw;
        const shapeHeight = isSideways ? tw : totalHeight;

        const padding = 160;
        const availableWidth = previewSize.width > padding ? previewSize.width - padding : 0;
        const availableHeight = previewSize.height > padding ? previewSize.height - padding : 0;

        const scale = Math.min(availableWidth / shapeWidth, availableHeight / shapeHeight);

        const stw = tw * scale;
        const sth = th * scale;
        const ssw = sw * scale;
        const ssh = sh * scale;
        const stemOffset = (stw - ssw) / 2;
        const totalScaledHeight = sth + ssh;

        const offsetX = -stw / 2;
        const offsetY = -totalScaledHeight / 2;

        const frontPoints = {
            p0: [0 + offsetX, 0 + offsetY], 
            p1: [stw + offsetX, 0 + offsetY], 
            p2: [stw + offsetX, sth + offsetY], 
            p3: [stemOffset + ssw + offsetX, sth + offsetY],
            p4: [stemOffset + ssw + offsetX, sth + ssh + offsetY], 
            p5: [stemOffset + offsetX, sth + ssh + offsetY],
            p6: [stemOffset + offsetX, sth + offsetY], 
            p7: [0 + offsetX, sth + offsetY],
        };
        
        const rotatedWidth = isSideways ? totalScaledHeight : stw;
        const rotatedHeight = isSideways ? stw : totalScaledHeight;
        const viewBoxSize = Math.max(rotatedWidth, rotatedHeight) + 160;
        const viewBox = `${-viewBoxSize / 2} ${-viewBoxSize / 2} ${viewBoxSize} ${viewBoxSize}`;

        return React.createElement('svg', { viewBox, className: "w-full h-full", style: { strokeLinejoin: 'round', strokeLinecap: 'round' } },
            React.createElement('g', { stroke: "#374151", strokeWidth: "1" },
                React.createElement('polygon', { points: Object.values(frontPoints).map(p => p.join(',')).join(' '), fill: "#d1d5db" })
            ),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p0, p2: frontPoints.p1, label: `${topWidth} mm`, paramLabel: "Top Bar Width", field: "topWidth", offset: { x: 0, y: -15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p1, p2: frontPoints.p2, label: `${topHeight} mm`, paramLabel: "Top Bar Height", field: "topHeight", offset: { x: 15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p7, p2: frontPoints.p5, label: `${totalHeight} mm`, paramLabel: "Total Height", field: "totalHeight", offset: { x: -15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p5, p2: frontPoints.p4, label: `${stemWidth} mm`, paramLabel: "Stem Width", field: "stemWidth", offset: { x: 0, y: 15 }, rotation: rotation, onDimensionChange: onDimensionChange })
        );
      };

      // --- From components/shapes/UShape.tsx ---
      const UShape = ({ dimensions, rotation, onDimensionChange, previewSize }) => {
        const { overallWidth, overallHeight, leftArmWidth, rightArmWidth, baseThickness } = dimensions;

        const ow = Math.max(overallWidth || 1, 1);
        const oh = Math.max(overallHeight || 1, 1);
        const law = Math.max(leftArmWidth || 1, 1);
        const raw = Math.max(rightArmWidth || 1, 1);
        const bt = Math.max(baseThickness || 1, 1);

        const isSideways = rotation % 180 !== 0;
        const shapeWidth = isSideways ? oh : ow;
        const shapeHeight = isSideways ? ow : oh;

        const padding = 160;
        const availableWidth = previewSize.width > padding ? previewSize.width - padding : 0;
        const availableHeight = previewSize.height > padding ? previewSize.height - padding : 0;

        const scale = Math.min(availableWidth / shapeWidth, availableHeight / shapeHeight);

        const sow = ow * scale;
        const soh = oh * scale;
        const slaw = law * scale;
        const sraw = raw * scale;
        const sbt = bt * scale;

        const offsetX = -sow / 2;
        const offsetY = -soh / 2;

        const frontPoints = {
            p0: [0 + offsetX, 0 + offsetY],
            p1: [slaw + offsetX, 0 + offsetY],
            p2: [slaw + offsetX, soh - sbt + offsetY],
            p3: [sow - sraw + offsetX, soh - sbt + offsetY],
            p4: [sow - sraw + offsetX, 0 + offsetY],
            p5: [sow + offsetX, 0 + offsetY],
            p6: [sow + offsetX, soh + offsetY],
            p7: [0 + offsetX, soh + offsetY],
        };

        const rotatedWidth = isSideways ? soh : sow;
        const rotatedHeight = isSideways ? sow : soh;
        const viewBoxSize = Math.max(rotatedWidth, rotatedHeight) + 160;
        const viewBox = `${-viewBoxSize / 2} ${-viewBoxSize / 2} ${viewBoxSize} ${viewBoxSize}`;

        return React.createElement('svg', { viewBox, className: "w-full h-full", style: { strokeLinejoin: 'round', strokeLinecap: 'round' } },
            React.createElement('g', { stroke: "#374151", strokeWidth: "1" },
                React.createElement('polygon', { points: Object.values(frontPoints).map(p => p.join(',')).join(' '), fill: "#d1d5db" })
            ),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p7, p2: frontPoints.p6, label: `${overallWidth} mm`, paramLabel: "Overall Width", field: "overallWidth", offset: { x: 0, y: 15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p6, p2: frontPoints.p5, label: `${overallHeight} mm`, paramLabel: "Overall Height", field: "overallHeight", offset: { x: 15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p0, p2: frontPoints.p1, label: `${leftArmWidth} mm`, paramLabel: "Left Arm Width", field: "leftArmWidth", offset: { x: 0, y: -15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: frontPoints.p4, p2: frontPoints.p5, label: `${rightArmWidth} mm`, paramLabel: "Right Arm Width", field: "rightArmWidth", offset: { x: 0, y: -15 }, rotation: rotation, onDimensionChange: onDimensionChange }),
            React.createElement(SvgDimensionLabel, { p1: {0: frontPoints.p2[0], 1: frontPoints.p7[1]}, p2: frontPoints.p2, label: `${baseThickness} mm`, paramLabel: "Base Thickness", field: "baseThickness", offset: { x: -15, y: 0 }, rotation: rotation, onDimensionChange: onDimensionChange })
        );
      };

      // --- From components/ShapeSelector.tsx ---
      const SHAPES = [
        { type: ShapeType.CUBE, label: 'Cube', icon: React.createElement(CubeIcon) },
        { type: ShapeType.L_SHAPE, label: 'L-Shape', icon: React.createElement(LShapeIcon) },
        { type: ShapeType.T_SHAPE, label: 'T-Shape', icon: React.createElement(TShapeIcon) },
        { type: ShapeType.U_SHAPE, label: 'U-Shape', icon: React.createElement(UShapeIcon) },
      ];

      const ShapeSelector = ({ selectedShape, onSelectShape }) => {
        return React.createElement('div', null,
          React.createElement('h2', { className: "text-lg font-semibold mb-3 text-gray-300" }, "1. Select Shape"),
          React.createElement('div', { className: "grid grid-cols-4 gap-4" },
            SHAPES.map(({ type, label, icon }) => {
              const isSelected = selectedShape === type;
              return React.createElement('button', {
                  key: type,
                  onClick: () => onSelectShape(type),
                  className: `flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-cyan-500 ${isSelected ? 'bg-cyan-500/20 border-cyan-500 shadow-lg shadow-cyan-500/10 border-double' : 'bg-gray-700/50 border-gray-600 hover:bg-gray-700 hover:border-gray-500'}`
                },
                React.createElement('div', { className: "w-10 h-10 mb-2 text-white" }, icon),
                React.createElement('span', { className: `font-medium text-sm ${isSelected ? 'text-cyan-300' : 'text-gray-300'}` }, label)
              );
            })
          )
        );
      };

      // --- From components/DimensionControls.tsx ---
      const DimensionInput = ({ label, value, field, onChange }) => (
        React.createElement('div', null,
          React.createElement('label', { className: "block text-sm font-medium text-gray-400 mb-1" }, label),
          React.createElement('div', { className: "relative" },
            React.createElement('input', {
              type: "number",
              value: value,
              onFocus: (e) => e.target.select(),
              onChange: (e) => onChange(field, e.target.value),
              className: "w-full bg-gray-700/80 border border-gray-600 rounded-md py-2 pl-3 pr-12 text-white focus:ring-cyan-500 focus:border-cyan-500",
              min: "1"
            }),
            React.createElement('span', { className: "absolute inset-y-0 right-0 flex items-center pr-3 text-cyan-400 text-sm font-semibold" }, "mm")
          )
        )
      );

      const DimensionControls = ({ shape, dimensions, onDimensionChange }) => {
        const renderInputs = () => {
          switch (shape) {
            case ShapeType.CUBE:
              const cubeDims = dimensions;
              return React.createElement(React.Fragment, null,
                React.createElement(DimensionInput, { label: "Width (X)", value: cubeDims.width, field: "width", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Height (Y)", value: cubeDims.height, field: "height", onChange: onDimensionChange })
              );
            case ShapeType.L_SHAPE:
              const lDims = dimensions;
              return React.createElement(React.Fragment, null,
                React.createElement(DimensionInput, { label: "Overall Height", value: lDims.overallHeight, field: "overallHeight", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Overall Width", value: lDims.overallWidth, field: "overallWidth", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Vertical Arm Width", value: lDims.verticalArmWidth, field: "verticalArmWidth", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Horizontal Arm Width", value: lDims.horizontalArmWidth, field: "horizontalArmWidth", onChange: onDimensionChange })
              );
            case ShapeType.T_SHAPE:
              const tDims = dimensions;
              return React.createElement(React.Fragment, null,
                React.createElement(DimensionInput, { label: "Top Bar Width", value: tDims.topWidth, field: "topWidth", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Top Bar Height", value: tDims.topHeight, field: "topHeight", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Stem Width", value: tDims.stemWidth, field: "stemWidth", onChange: onDimensionChange }),
                React.createElement(DimensionInput, { label: "Stem Height", value: tDims.stemHeight, field: "stemHeight", onChange: onDimensionChange })
              );
            case ShapeType.U_SHAPE:
                const uDims = dimensions;
                return React.createElement(React.Fragment, null,
                    React.createElement(DimensionInput, { label: "Overall Width", value: uDims.overallWidth, field: "overallWidth", onChange: onDimensionChange }),
                    React.createElement(DimensionInput, { label: "Overall Height", value: uDims.overallHeight, field: "overallHeight", onChange: onDimensionChange }),
                    React.createElement(DimensionInput, { label: "Left Arm Width", value: uDims.leftArmWidth, field: "leftArmWidth", onChange: onDimensionChange }),
                    React.createElement(DimensionInput, { label: "Right Arm Width", value: uDims.rightArmWidth, field: "rightArmWidth", onChange: onDimensionChange }),
                    React.createElement(DimensionInput, { label: "Base Thickness", value: uDims.baseThickness, field: "baseThickness", onChange: onDimensionChange })
                );
            default:
              return null;
          }
        };

        return React.createElement('div', null,
          React.createElement('h2', { className: "text-lg font-semibold mb-3 text-gray-300" }, "2. Enter Dimensions"),
          React.createElement('div', { className: "space-y-4" }, renderInputs())
        );
      };

      // --- From components/PreviewWindow.tsx ---
      const PreviewWindow = ({ shape, dimensions, rotation, onDimensionChange, previewSize }) => {
        const renderShape = () => {
          const props = { dimensions, rotation, onDimensionChange, previewSize };
          switch (shape) {
            case ShapeType.CUBE:
              return React.createElement(CubeShape, props);
            case ShapeType.L_SHAPE:
              return React.createElement(LShape, props);
            case ShapeType.T_SHAPE:
              return React.createElement(TShape, props);
            case ShapeType.U_SHAPE:
                return React.createElement(UShape, props);
            default:
              return null;
          }
        };

        return React.createElement('div', { className: "w-full h-full flex items-center justify-center p-4" },
          React.createElement('div', { 
            style: { 
              transform: `rotate(${rotation}deg)`, 
              transition: 'transform 0.3s ease-in-out',
              width: '100%',
              height: '100%'
            } 
          },
            renderShape()
          )
        );
      };

      // --- From App.tsx ---
      const App = () => {
        const [shape, setShape] = useState(ShapeType.CUBE);
        const [dimensions, setDimensions] = useState(DEFAULT_DIMENSIONS[ShapeType.CUBE]);
        const [rotation, setRotation] = useState(0);
        const previewContainerRef = useRef(null);
        const [previewSize, setPreviewSize] = useState({ width: 0, height: 0 });

        useEffect(() => {
            const observer = new ResizeObserver(entries => {
                if (entries[0]) {
                    const { width, height } = entries[0].contentRect;
                    setPreviewSize({ width, height });
                }
            });
            if (previewContainerRef.current) {
                observer.observe(previewContainerRef.current);
            }
            return () => {
                if (previewContainerRef.current) {
                    observer.unobserve(previewContainerRef.current);
                }
            };
        }, []);

        const handleShapeChange = (newShape) => {
          setShape(newShape);
          setDimensions(DEFAULT_DIMENSIONS[newShape]);
          setRotation(0);
        };

        const handleDimensionChange = (field, value) => {
          const numericValue = value === '' ? 0 : parseFloat(value);
          if (!isNaN(numericValue)) {
            setDimensions(prev => ({ ...prev, [field]: numericValue }));
          }
        };

        const handleRotate = (direction) => {
            setRotation(prev => prev + (direction === 'left' ? -90 : 90));
        };

        const currentDimensions = useMemo(() => dimensions, [dimensions]);
        
        const displayRotation = ((rotation % 360) + 360) % 360;

        return React.createElement('div', { className: "min-h-screen bg-gray-900 text-white flex flex-col lg:flex-row font-sans" },
          React.createElement('header', { className: "p-4 border-b border-gray-700 lg:hidden" },
            React.createElement('h1', { className: "text-2xl font-bold text-center text-cyan-400" }, "Luke Wall Cutter")
          ),
          React.createElement('aside', { className: "w-full lg:w-96 bg-gray-800/50 backdrop-blur-sm p-6 border-r border-gray-700/50 flex-shrink-0" },
            React.createElement('div', { className: "sticky top-6" },
              React.createElement('h1', { className: "text-3xl font-bold mb-2 hidden lg:block text-cyan-400" }, "Luke Wall Cutter"),
              React.createElement('p', { className: "text-gray-400 mb-8 hidden lg:block" }, "Select a shape and enter its dimensions in millimeters."),
              React.createElement('div', { className: "space-y-8" },
                React.createElement(ShapeSelector, { selectedShape: shape, onSelectShape: handleShapeChange }),
                React.createElement(DimensionControls, { shape: shape, dimensions: currentDimensions, onDimensionChange: handleDimensionChange })
              )
            )
          ),
          React.createElement('main', { className: "flex-1 flex flex-col p-2 lg:p-6 min-h-[50vh] lg:min-h-0" },
            React.createElement('div', { className: "w-full h-full bg-gray-800 rounded-xl overflow-hidden border border-gray-700 shadow-2xl shadow-cyan-500/10 flex flex-col" },
              React.createElement('div', { className: "flex-1 relative", ref: previewContainerRef },
                React.createElement(PreviewWindow, { shape: shape, dimensions: currentDimensions, rotation: rotation, onDimensionChange: handleDimensionChange, previewSize: previewSize })
              ),
              React.createElement('div', { className: "p-2 bg-gray-900/50 flex justify-center items-center gap-4 border-t border-gray-700" },
                React.createElement('button', {
                    onClick: () => handleRotate('left'),
                    className: "p-2 rounded-full bg-gray-700 hover:bg-cyan-500/20 text-white transition-colors"
                  },
                  React.createElement(RotateLeftIcon)
                ),
                React.createElement('span', { className: "text-sm font-medium text-gray-400 w-16 text-center" }, `${displayRotation}°`),
                React.createElement('button', {
                    onClick: () => handleRotate('right'),
                    className: "p-2 rounded-full bg-gray-700 hover:bg-cyan-500/20 text-white transition-colors"
                  },
                  React.createElement(RotateRightIcon)
                )
              )
            )
          )
        );
      };

      // --- From index.tsx ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        React.createElement(React.StrictMode, null,
          React.createElement(App)
        )
      );
    </script>
  </body>
</html>